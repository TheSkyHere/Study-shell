#!/bin/bash
test_value1="0x55 0x55 0x55 0x55 0x55 0x55 0x55 0x55 0x55 0x55 0x55 0x55 0x55 0x55 0x55 0x55"
test_value2="0xaa 0xaa 0xaa 0xaa 0xaa 0xaa 0xaa 0xaa 0xaa 0xaa 0xaa 0xaa 0xaa 0xaa 0xaa 0xaa"
i=1
while :
do
	echo "No.$i test"
	i2ctransfer -f -y 12 w17@0x50 0x00 $test_value1
	res1=$(i2ctransfer -f -y 12 w1@0x50 0x00 r16)

	if [ "$res1" != "$test_value1" ]; then
		echo "get Error:$res1,expect:$test_value1"
		exit 1
	fi

	i2ctransfer -f -y 12 w17@0x50 0x00 $test_value2
	res2=$(i2ctransfer -f -y 12 w1@0x50 0x00 r16)

	echo "get:$res2,expect:$test_value2"
	if [ "$res2" != "$test_value2" ]; then
		echo "Error:$res2,expect:$test_value2"
		exit 1
	fi


    i=$((i+1))
	if [ $i -gt $1 ]; then
        i2ctransfer -f -y 12 w17@0x50 0x00 0x01 0x00 0x00 0x01 0x0c 0x00 0x00 0xf2 0x01 0x0b 0x00 0xe3 0xf8 0xb7 0xc6 0x48 
        echo "test pass"
		exit 1
	fi
done
